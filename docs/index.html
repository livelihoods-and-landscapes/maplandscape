<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="A Shiny application to explore, visualise, and 
    edit geospatial data stored in GeoPackeges in interactive 
    tables, web maps, and charts. Either deploy and use a pre-built 
    application or incorporate these functions in a custom Shiny app.">
<title>Shiny application to explore and visualise GeoPackage data • maplandscape</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Shiny application to explore and visualise GeoPackage data">
<meta property="og:description" content="A Shiny application to explore, visualise, and 
    edit geospatial data stored in GeoPackeges in interactive 
    tables, web maps, and charts. Either deploy and use a pre-built 
    application or incorporate these functions in a custom Shiny app.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">maplandscape</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/livelihoods-and-landscapes/maplandscape/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="maplandscape">maplandscape<a class="anchor" aria-label="anchor" href="#maplandscape"></a>
</h1></div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>A package that provides functions for building <a href="https://shiny.rstudio.com" class="external-link">Shiny</a> dashboard applications to explore and visualise spatial layers in GeoPackages. In particular, it focuses on providing browser-based tools for analysing data stored in QFieldCloud.</p>
<p>A pre-built <a href="https://shiny.rstudio.com" class="external-link">Shiny</a> application is provided with this package which uses these functions and provides tools for:</p>
<ul>
<li>Syncing data stored in multiple GeoPackages.</li>
<li>Exploring GeoPackage layers in interactive tables, web maps, and charts.</li>
<li>Customising and styling charts and web maps.</li>
<li>Combining layers using spatial and non-spatial joins.</li>
<li>Generating summary tables through group-by and summarise operations.</li>
<li>Generating new layers and add new columns to existing layers.</li>
<li>Authenticated access to GeoPackages stored in QFieldCloud and Google Cloud Storage.</li>
</ul>
<p>This package was developed as part of the <a href="https://livelihoods-and-landscapes.com" class="external-link">Livelihoods and Landscapes</a> project which is developing tools and approaches to map diverse agricultural landscapes. The initial motivation for developing the package and Shiny application was to provide analysts with tools to analyse and visualise geospatial data collected ‘in the field’ using the <a href="https://qfield.org" class="external-link">QField</a> mobile GIS application.</p>
</div>
<div class="section level2">
<h2 id="use">Use<a class="anchor" aria-label="anchor" href="#use"></a>
</h2>
<p>The vignettes provide a range of tutorials for exploring and analysing data in GeoPackages using the maplandscape app. These include tutorials demonstrating how to perform a range of table analysis operations (add columns, filter rows, join tables), spatial analysis operations (spatial join - combine spatial layers), style your own web maps, and create a range of charts to visualise data in your GeoPackages.</p>
<p>The figure below provides an overview of the UI for the maplandscape app provided with this package. Each of the main tabs in the app have a similar layout with a scrollable sidebar containing options for loading GeoPackages into the app, selecting a layer in a GeoPackage, querying and analysing GeoPackage data, and styling charts and web maps. The data in GeoPackage layers is rendered in the main panel of the page in either table, web map, or chart formats.</p>
<p><img src="reference/figures/ui-overview.jpg" width="100%" style="display: block; margin: auto;"></p>
<div class="section level3">
<h3 id="local-r-package">Local R Package<a class="anchor" aria-label="anchor" href="#local-r-package"></a>
</h3>
<p>Install as an R package:</p>
<pre><code><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"livelihoods-and-landscapes/maplandscape"</span><span class="op">)</span></code></pre>
<p>Build and customise your own Shiny application using functions provided by maplandscape or launch a pre-built application:</p>
<pre><code><span class="va">dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"app"</span>, package <span class="op">=</span> <span class="st">"maplandscape"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="va">dir</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/livelihoods-and-landscapes/maplandscape" class="external-link">maplandscape</a></span><span class="op">)</span>
<span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyAppDir</a></span><span class="op">(</span><span class="st">"."</span><span class="op">)</span></code></pre>
<p>To build the package:</p>
<pre><code><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/check.html" class="external-link">check</a></span><span class="op">(</span><span class="op">)</span>
<span class="co"># update NAMESPACE file for exports</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">document</a></span><span class="op">(</span><span class="op">)</span></code></pre>
<p>The will launch a pre-built Shiny application to explore data in GeoPackages from the <code>inst/app</code> sub-directory of the package.</p>
</div>
<div class="section level3">
<h3 id="shinyappsio">shinyapps.io<a class="anchor" aria-label="anchor" href="#shinyappsio"></a>
</h3>
<p>RStudio offers a free-tier hosting service for Shiny apps. Sign up at <a href="https://www.shinyapps.io" class="external-link">shinyapps.io</a>.</p>
<p>Follow the above commands to launch maplandscape (or your custom Shiny application). In the top-right of the application window you will see a <em>Publish</em> button, click this button and follow the prompts to deploy the application to <a href="https://www.shinyapps.io" class="external-link">shinyapps.io</a>.</p>
<p><img src="reference/figures/shiny-publish.png" width="40%" style="display: block; margin: auto;"></p>
<p>RStudio provide a detailed tutorial for deploying apps to shinyapps.io <a href="https://shiny.rstudio.com/articles/shinyapps.html" class="external-link">here</a>.</p>
</div>
<div class="section level3">
<h3 id="docker-and-host-in-the-cloud">Docker and host in the cloud<a class="anchor" aria-label="anchor" href="#docker-and-host-in-the-cloud"></a>
</h3>
<p>This requires installing <a href="https://git-scm.com/downloads" class="external-link">git</a> and <a href="https://www.docker.com" class="external-link">docker</a>. Clone the maplandscape GitHub repo:</p>
<pre><code>git clone https://github.com/livelihoods-and-landscapes/maplandscape.git

cd maplandscape</code></pre>
<div class="section level4">
<h4 id="docker-and-shiny-server">Docker and Shiny Server<a class="anchor" aria-label="anchor" href="#docker-and-shiny-server"></a>
</h4>
<p>There is a sub-directory named <code>docker-shiny-server</code>. This contains a <code>Dockerfile</code> that lists instructions that are used to build a docker image.</p>
<pre><code>cd /inst/docker-shiny-server

docker build -t maplandscape ShinyServer.Dockerfile</code></pre>
<p>The image is based on the <code>rocker/shiny:latest</code> image which includes <a href="https://www.rstudio.com/products/shiny/shiny-server/?_ga=2.240850435.1437924050.1628840494-908324396.1627896044" class="external-link">Shiny Server</a> to host the maplandscape Shiny application. Shiny Server serves apps out of the <code>srv/shiny-server/</code> directory; building the docker image will install all the R packages required to run maplandscape, install the maplandscape package from github, and copy an <code>app.R</code> script into <code>srv/shiny-server/app</code> which contains the commands to launch maplandscape.</p>
<p>A customised <code>shiny-customised.config</code> file is used to set the <code>app_dir</code> to the app directory where Shiny Server will launch and serve the app from.</p>
<p>Launch the docker container:</p>
<pre><code>docker run -p 3838:3838 maplandscape</code></pre>
<p>You can find more information about <a href="https://www.rstudio.com/products/shiny/shiny-server/?_ga=2.240850435.1437924050.1628840494-908324396.1627896044" class="external-link">Shiny Server</a> <a href="https://shiny.rstudio.com/articles/shiny-server.html" class="external-link">here</a>, at its <a href="https://github.com/rstudio/shiny-server" class="external-link">GitHub repo</a>, and following this <a href="https://deanattali.com/2015/05/09/setup-rstudio-shiny-server-digital-ocean/" class="external-link">tutorial</a>.</p>
<p>Please see the vignette Deploy: Google Cloud for a tutorial demonstrating how to deploy a containerised Shiny application on Google Cloud Run.</p>
</div>
<div class="section level4">
<h4 id="docker">Docker<a class="anchor" aria-label="anchor" href="#docker"></a>
</h4>
<p>To deploy as a containerised Shiny application without Shiny Server (e.g. if deploying using Shiny Proxy) use the <code>Dockerfile</code> in the <code>/inst/</code> directory. This <code>Dockerfile</code> is based of a generic <code>maplandscape-base</code> image which is pre-built on top of Ubuntu 20.04 LTS and the rocker r-ver 4.1.2 image. It contains the system libraries and main R package dependencies used to build <code>maplandscape</code>.</p>
<pre><code>docker build -t maplandscape .</code></pre>
<p>And to run:</p>
<pre><code>docker run -p 3838:3838 maplandscape</code></pre>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/livelihoods-and-landscapes/maplandscape/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing maplandscape</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>John Duncan <br><small class="roles"> Maintainer, author </small>  </li>
<li>Kevin Davies <br><small class="roles"> Author </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by John Duncan, Kevin Davies.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
